<!DOCTYPE html><html class="default" lang="ru" data-base="."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@utrace/u-scanner - v0.4.0</title><link rel="icon" href="assets/favicon.png" type="image/png"/><meta name="description" content="Documentation for @utrace/u-scanner"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@utrace/u-scanner - v0.4.0</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>@utrace/u-scanner - v0.4.0</h1></div><div class="tsd-panel tsd-typography"><a id="u-scanner" class="tsd-anchor"></a><h1 class="tsd-anchor-link">U-Scanner<a href="#u-scanner" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Сканер DataMatrix кодов UScanner от компании Utrace. Предоставляет интерфейс сканера и гибкую событийную модель.</p>
<a id="установка" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Установка<a href="#установка" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Перед установкой требуется получить токен авторизации в регистре гилаба Utrace.
Токен необходимо поместить в файл (создать файл) <code>.npmrc</code> в корне проекта.</p>
<pre><code class="sh"><span class="hl-0"># Регистрация URL адреса приватного хранилища npm пакетов, позволяя пакетам @utrace загружаться из указанного URL.</span><br/><span class="hl-1">&quot;@utrace:registry&quot;</span><span class="hl-2">=</span><span class="hl-1">&quot;https://git.utrace.ru/api/v4/packages/npm/&quot;</span><br/><br/><span class="hl-0"># Добавь Gitlab-auth токен для чтения из приватного регистра. Это позволит загрузить npm библиотеку из окружения @utrace.</span><br/><span class="hl-1">&quot;//git.utrace.ru/api/v4/packages/npm/:_authToken&quot;</span><span class="hl-2">=</span><span class="hl-1">&quot;${</span><span class="hl-3">GITLAB_AUTH_TOKEN</span><span class="hl-1">}&quot;</span>
</code><button type="button">Copy</button></pre>

<p>После этого вы можете установить UScanner с помощью npm или yarn</p>
<pre><code class="sh"><span class="hl-0"># Установка с помощью npm</span><br/><span class="hl-1">npm</span><span class="hl-4"> </span><span class="hl-2">install</span><span class="hl-4"> </span><span class="hl-2">@utrace/u-scanner</span><br/><br/><span class="hl-0"># Установка с помощью yarn</span><br/><span class="hl-1">yarn</span><span class="hl-4"> </span><span class="hl-2">add</span><span class="hl-4"> </span><span class="hl-2">@utrace/u-scanner</span>
</code><button type="button">Copy</button></pre>

<a id="пример-использования-vanilla-js" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Пример использования Vanilla JS<a href="#пример-использования-vanilla-js" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="html"><span class="hl-5">&lt;</span><span class="hl-6">body</span><span class="hl-5">&gt;</span><br/><span class="hl-4">  </span><span class="hl-5">&lt;</span><span class="hl-6">div</span><span class="hl-5">&gt;&lt;</span><span class="hl-6">video</span><span class="hl-4"> </span><span class="hl-7">id</span><span class="hl-4">=</span><span class="hl-8">&quot;u-scanner&quot;</span><span class="hl-5">&gt;&lt;/</span><span class="hl-6">video</span><span class="hl-5">&gt;&lt;/</span><span class="hl-6">div</span><span class="hl-5">&gt;</span><br/><span class="hl-4">  </span><span class="hl-5">&lt;</span><span class="hl-6">script</span><span class="hl-9"> </span><span class="hl-7">type</span><span class="hl-9">=</span><span class="hl-8">&quot;module&quot;</span><span class="hl-5">&gt;</span><br/><span class="hl-9">    </span><span class="hl-10">import</span><span class="hl-9"> { </span><span class="hl-3">UScanner</span><span class="hl-9"> } </span><span class="hl-10">from</span><span class="hl-9"> </span><span class="hl-2">&#39;@utrace/u-scanner&#39;</span><span class="hl-9">;</span><br/><br/><span class="hl-9">    </span><span class="hl-3">window</span><span class="hl-9">.</span><span class="hl-1">onload</span><span class="hl-9"> </span><span class="hl-4">=</span><span class="hl-9"> </span><span class="hl-11">function</span><span class="hl-9">() {</span><br/><span class="hl-9">       </span><span class="hl-11">const</span><span class="hl-9"> </span><span class="hl-12">scanner</span><span class="hl-9"> </span><span class="hl-4">=</span><span class="hl-9"> </span><span class="hl-11">new</span><span class="hl-9"> </span><span class="hl-1">UScanner</span><span class="hl-9">({</span><br/><span class="hl-9">         </span><span class="hl-3">videoOutput:</span><span class="hl-9"> </span><span class="hl-3">document</span><span class="hl-9">.</span><span class="hl-1">querySelector</span><span class="hl-9">(</span><span class="hl-2">&#39;#u-scanner&#39;</span><span class="hl-9">),</span><br/><span class="hl-9">       });</span><br/><span class="hl-9">       </span><span class="hl-3">scanner</span><span class="hl-9">.</span><span class="hl-1">on</span><span class="hl-9">(</span><span class="hl-2">&quot;scan-success&quot;</span><span class="hl-9">, (</span><span class="hl-3">result</span><span class="hl-9">) </span><span class="hl-11">=&gt;</span><span class="hl-9"> {</span><br/><span class="hl-9">         </span><span class="hl-3">console</span><span class="hl-9">.</span><span class="hl-1">log</span><span class="hl-9">(</span><span class="hl-2">&quot;Результат сканирования:&quot;</span><span class="hl-9">, </span><span class="hl-3">result</span><span class="hl-9">);</span><br/><span class="hl-9">         </span><span class="hl-3">scanner</span><span class="hl-9">.</span><span class="hl-1">destroy</span><span class="hl-9">();</span><br/><span class="hl-9">       });</span><br/><span class="hl-9">    }</span><br/><span class="hl-9">  </span><span class="hl-5">&lt;/</span><span class="hl-6">script</span><span class="hl-5">&gt;</span><br/><span class="hl-5">&lt;</span><span class="hl-6">body</span><span class="hl-5">&gt;</span>
</code><button type="button">Copy</button></pre>

<a id="пример-использования-react" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Пример использования React<a href="#пример-использования-react" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="tsx"><span class="hl-10">import</span><span class="hl-4"> { </span><span class="hl-3">UScanner</span><span class="hl-4">, </span><span class="hl-10">type</span><span class="hl-4"> </span><span class="hl-3">UScannerTypes</span><span class="hl-4"> } </span><span class="hl-10">from</span><span class="hl-4"> </span><span class="hl-2">&#39;@utrace/u-scanner&#39;</span><span class="hl-4">;</span><br/><br/><span class="hl-11">const</span><span class="hl-4"> </span><span class="hl-1">ScannerComponent</span><span class="hl-4"> = () </span><span class="hl-11">=&gt;</span><span class="hl-4"> {</span><br/><span class="hl-4">  </span><span class="hl-11">const</span><span class="hl-4"> [</span><span class="hl-12">code</span><span class="hl-4">, </span><span class="hl-12">setCode</span><span class="hl-4">] = </span><span class="hl-1">useState</span><span class="hl-4">&lt;</span><span class="hl-13">UScannerTypes</span><span class="hl-4">.</span><span class="hl-13">DataMatrixCode</span><span class="hl-4"> | </span><span class="hl-13">null</span><span class="hl-4">&gt;(</span><span class="hl-11">null</span><span class="hl-4">);</span><br/><br/><span class="hl-4">  </span><span class="hl-11">const</span><span class="hl-4"> </span><span class="hl-12">videoRef</span><span class="hl-4"> = </span><span class="hl-1">useRef</span><span class="hl-4">&lt;</span><span class="hl-13">HTMLVideoElement</span><span class="hl-4">&gt;(</span><span class="hl-11">null</span><span class="hl-4">);</span><br/><br/><span class="hl-4">  </span><span class="hl-1">useEffect</span><span class="hl-4">(() </span><span class="hl-11">=&gt;</span><span class="hl-4"> {</span><br/><span class="hl-4">    </span><span class="hl-10">if</span><span class="hl-4"> (!</span><span class="hl-3">videoRef</span><span class="hl-4">.</span><span class="hl-3">current</span><span class="hl-4">) {</span><br/><span class="hl-4">      </span><span class="hl-10">return</span><span class="hl-4">;</span><br/><span class="hl-4">    }</span><br/><span class="hl-4">    </span><span class="hl-11">const</span><span class="hl-4"> </span><span class="hl-12">scanner</span><span class="hl-4"> = </span><span class="hl-11">new</span><span class="hl-4"> </span><span class="hl-1">UScanner</span><span class="hl-4">({ </span><span class="hl-3">videoOutput:</span><span class="hl-4"> </span><span class="hl-3">videoRef</span><span class="hl-4">.</span><span class="hl-3">current</span><span class="hl-4"> });</span><br/><span class="hl-4">    </span><span class="hl-3">scanner</span><span class="hl-4">.</span><span class="hl-1">on</span><span class="hl-4">(</span><span class="hl-2">&#39;scan-success&#39;</span><span class="hl-4">, ({ </span><span class="hl-3">codeData</span><span class="hl-4"> }) </span><span class="hl-11">=&gt;</span><span class="hl-4"> {</span><br/><span class="hl-4">      </span><span class="hl-1">setCode</span><span class="hl-4">(</span><span class="hl-3">codeData</span><span class="hl-4">);</span><br/><span class="hl-4">      </span><span class="hl-3">scanner</span><span class="hl-4">.</span><span class="hl-1">destroy</span><span class="hl-4">(); </span><span class="hl-0">// если сканер больше не нужен</span><br/><span class="hl-4">    })</span><br/><br/><span class="hl-4">    </span><span class="hl-10">return</span><span class="hl-4"> () </span><span class="hl-11">=&gt;</span><span class="hl-4"> </span><span class="hl-3">scanner</span><span class="hl-4">.</span><span class="hl-1">destroy</span><span class="hl-4">();</span><br/><span class="hl-4">  })</span><br/><br/><span class="hl-4">  </span><span class="hl-10">return</span><span class="hl-4"> (</span><br/><span class="hl-4">   </span><span class="hl-5">&lt;</span><span class="hl-6">section</span><span class="hl-5">&gt;</span><br/><span class="hl-4">      </span><span class="hl-5">&lt;</span><span class="hl-6">div</span><span class="hl-4"> </span><span class="hl-7">className</span><span class="hl-4">=</span><span class="hl-2">&quot;video-container&quot;</span><span class="hl-5">&gt;</span><br/><span class="hl-4">        </span><span class="hl-5">&lt;</span><span class="hl-6">video</span><span class="hl-4"> </span><span class="hl-7">ref</span><span class="hl-4">=</span><span class="hl-11">{</span><span class="hl-3">videoRef</span><span class="hl-11">}</span><span class="hl-4"> </span><span class="hl-5">/&gt;</span><br/><span class="hl-4">      </span><span class="hl-5">&lt;/</span><span class="hl-6">div</span><span class="hl-5">&gt;</span><br/><br/><span class="hl-4">      </span><span class="hl-11">{</span><span class="hl-3">settings</span><span class="hl-9">.</span><span class="hl-3">scanResult</span><span class="hl-9"> </span><span class="hl-4">&amp;&amp;</span><span class="hl-9"> (</span><br/><span class="hl-9">        </span><span class="hl-5">&lt;</span><span class="hl-6">div</span><span class="hl-5">&gt;</span><br/><span class="hl-9">          </span><span class="hl-5">&lt;</span><span class="hl-6">b</span><span class="hl-5">&gt;</span><span class="hl-9">Обнаружен ДМ код: </span><span class="hl-5">&lt;/</span><span class="hl-6">b</span><span class="hl-5">&gt;</span><br/><span class="hl-9">          </span><span class="hl-5">&lt;</span><span class="hl-6">pre</span><span class="hl-5">&gt;</span><span class="hl-11">{</span><span class="hl-12">JSON</span><span class="hl-9">.</span><span class="hl-1">stringify</span><span class="hl-9">(</span><span class="hl-3">settings</span><span class="hl-9">.</span><span class="hl-3">scanResult</span><span class="hl-9">, </span><span class="hl-11">null</span><span class="hl-9">, </span><span class="hl-14">2</span><span class="hl-9">)</span><span class="hl-11">}</span><span class="hl-5">&lt;/</span><span class="hl-6">pre</span><span class="hl-5">&gt;</span><br/><span class="hl-9">        </span><span class="hl-5">&lt;/</span><span class="hl-6">div</span><span class="hl-5">&gt;</span><br/><span class="hl-9">      )</span><span class="hl-11">}</span><br/><span class="hl-4">   </span><span class="hl-5">&lt;/</span><span class="hl-6">section</span><span class="hl-5">&gt;</span><br/><span class="hl-4">  )</span><br/><span class="hl-4">}</span>
</code><button type="button">Copy</button></pre>

</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-alpha" name="alpha"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Alpha</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-beta" name="beta"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Beta</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#u-scanner"><span>U-<wbr/>Scanner</span></a><ul><li><a href="#установка"><span>Установка</span></a></li><li><a href="#пример-использования-vanilla-js"><span>Пример использования <wbr/>Vanilla JS</span></a></li><li><a href="#пример-использования-react"><span>Пример использования <wbr/>React</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">@utrace/u-scanner - v0.4.0</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer></footer><div class="overlay"></div></body></html>
